<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/" xmlns="http://www.w3.org/1999/html">
<head th:replace="~{fragmentsOfUser::head}"></head>

<body class="js">

<!-- Preloader -->
<div class="preloader">
    <div class="preloader-inner">
        <div class="preloader-icon">
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- End Preloader -->

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header col-12 d-flex justify-content-center align-items-center" style="border-bottom: 1px solid #ccc;">
                <h4 class="m-2">Giỏ hàng</h4>
            </div>
            <div class="modal-body mt-5 col-12">
                <div class="container overflow-auto" style="max-height: 100%; overflow-x: hidden;overflow-y: show;">
                    <div class="row mt-2 text-center">
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-12 mb-2">
                            <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3 col-12" aria-current="true">
                                <img src="https://github.com/twbs.png" alt="twbs" width="64" height="64" class="rounded-circle flex-shrink-0">
                                <div class="d-flex gap-2 w-100 justify-content-between">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 my-auto">Tên sản phẩm</h6>
                                        <p class="mb-0 opacity-75 mt-2 my-auto" style="text-align: justify;">Số lượng: 3</p>
                                    </div>
                                    <button class="small opacity-50 text-nowrap d-flex justify-content-center align-items-center" style="width: 10%;">
                                        <i class="fa fa-trash fa-lg" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" onclick="window.location.href='/checkout'">Thanh toán
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Header -->
<header th:replace="~{fragmentsOfUser::navbar}"></header>
<!-- Product Style -->
<section class="product-area shop-sidebar shop section">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-4 col-12">
                <div class="shop-sidebar">
                    <!-- Single Widget -->
                    <div class="single-widget category">
                        <h3 class="title">Categories</h3>
                        <ul class="categor-list">
                            <li><a href="#">T-shirts</a></li>
                            <li><a href="#">jacket</a></li>
                            <li><a href="#">jeans</a></li>
                            <li><a href="#">sweatshirts</a></li>
                            <li><a href="#">trousers</a></li>
                            <li><a href="#">kitwears</a></li>
                            <li><a href="#">accessories</a></li>
                        </ul>
                    </div>
                    <!--/ End Single Widget -->
                    <!-- Shop By Price -->
                    <div class="single-widget range">
                        <h3 class="title">Shop by Price</h3>
                        <div class="price-filter">
                            <div class="price-filter-inner">
                                <div id="slider-range"></div>
                                <div class="price_slider_amount">
                                    <div class="label-input">
                                        <span>Range:</span><input type="text" id="amount" name="price"
                                                                  placeholder="Add Your Price"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ul class="check-box-list">
                            <li>
                                <label class="checkbox-inline" for="1"><input name="news" id="1" type="checkbox">$20 -
                                    $50<span class="count">(3)</span></label>
                            </li>
                            <li>
                                <label class="checkbox-inline" for="2"><input name="news" id="2" type="checkbox">$50 -
                                    $100<span class="count">(5)</span></label>
                            </li>
                            <li>
                                <label class="checkbox-inline" for="3"><input name="news" id="3" type="checkbox">$100 -
                                    $250<span class="count">(8)</span></label>
                            </li>
                        </ul>
                    </div>
                    <!--/ End Shop By Price -->
                    <!-- Single Widget -->
                    <div class="single-widget recent-post">
                        <h3 class="title">Recent post</h3>
                        <!-- Single Post -->
                        <div class="single-post first">
                            <div class="image">
                                <img src="https://via.placeholder.com/75x75" alt="#">
                            </div>
                            <div class="content">
                                <h5><a href="#">Girls Dress</a></h5>
                                <p class="price">$99.50</p>
                                <ul class="reviews">
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li><i class="ti-star"></i></li>
                                    <li><i class="ti-star"></i></li>
                                </ul>
                            </div>
                        </div>
                        <!-- End Single Post -->
                        <!-- Single Post -->
                        <div class="single-post first">
                            <div class="image">
                                <img src="https://via.placeholder.com/75x75}" alt="#">
                            </div>
                            <div class="content">
                                <h5><a href="#">Women Clothings</a></h5>
                                <p class="price">$99.50</p>
                                <ul class="reviews">
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li><i class="ti-star"></i></li>
                                </ul>
                            </div>
                        </div>
                        <!-- End Single Post -->
                        <!-- Single Post -->
                        <div class="single-post first">
                            <div class="image">
                                <img src="https://via.placeholder.com/75x75" alt="#">
                            </div>
                            <div class="content">
                                <h5><a href="#">Man Tshirt</a></h5>
                                <p class="price">$99.50</p>
                                <ul class="reviews">
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                    <li class="yellow"><i class="ti-star"></i></li>
                                </ul>
                            </div>
                        </div>
                        <!-- End Single Post -->
                    </div>
                    <!--/ End Single Widget -->
                    <!-- Single Widget -->
                    <div class="single-widget category">
                        <h3 class="title">Manufacturers</h3>
                        <ul class="categor-list">
                            <li><a href="#">Forever</a></li>
                            <li><a href="#">giordano</a></li>
                            <li><a href="#">abercrombie</a></li>
                            <li><a href="#">ecko united</a></li>
                            <li><a href="#">zara</a></li>
                        </ul>
                    </div>
                    <!--/ End Single Widget -->
                </div>
            </div>
            <div class="col-lg-9 col-md-8 col-12">
                <div class="row">
                    <div class="col-12">
                        <!-- Shop Top -->
                        <div class="shop-top">
                            <div class="shop-shorter">
                                <div class="single-shorter">
                                    <label>Show :</label>
                                    <select>
                                        <option selected="selected">09</option>
                                        <option>15</option>
                                        <option>25</option>
                                        <option>30</option>
                                    </select>
                                </div>
                                <div class="single-shorter">
                                    <label>Sort By :</label>
                                    <select>
                                        <option selected="selected">Name</option>
                                        <option>Price</option>
                                        <option>Size</option>
                                    </select>
                                </div>
                            </div>
                            <ul class="view-mode">
                                <li class="active"><a href="shop-grid.html"><i class="fa fa-th-large"></i></a></li>
                                <li><a href="shop-list.html"><i class="fa fa-th-list"></i></a></li>
                            </ul>
                        </div>
                        <!--/ End Shop Top -->
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4 col-md-6 col-12" th:each="product : ${listProducts}">
                        <div class="single-product">
                            <div class="product-img">
                                <a th:href="@{/userProductDetail/{id}(id=${product.id})}">
                                    <img style="height:300px" class="default-img" th:src="@{'/img/' + ${product.image}}"
                                         alt="#">
                                    <img style="height:300px" class="hover-img" th:src="@{'/img/' + ${product.image}}"
                                         alt="#">
                                    <span class="out-of-stock" th:text="'-'+${product.discount}+'%'"></span>
                                </a>
                                <div class="button-head">
                                    <div class="product-action">
                                        <a title="Wishlist" href="#"><i
                                                class=" ti-heart "></i><span>Add to Wishlist</span></a>
                                        <a title="Compare" href="#"><i
                                                class="ti-bar-chart-alt"></i><span>Add to Compare</span></a>
                                    </div>
                                    <div class="product-action-2">
                                        <a th:if="${name == ''}" title="Add to cart" href="/login">Add to cart</a>
                                        <a th:if="${name != ''}" href="#" class="add-to-cart-link" th:data-user-id="1" th:data-product-id="${product.id}">Add to cart</a>
                                    </div>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3><a th:href="@{/product-details/{id}(id=${product.id})}"
                                       th:text="${product.name}"></a></h3>
                                <div class="product-price">
                                    <span style="text-decoration: line-through; opacity: 0.5; font-size: 12.5px" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')}+' đ'"></span>
                                </div>
                                <div class="product-price">
                                    <span th:with="discountedPrice=${product.price - (product.price * product.discount / 100)}">
                                        <span style="color:red; font-weight:bold" th:text="${#numbers.formatDecimal(discountedPrice, 0, 'COMMA', 0, 'POINT')} + ' đ'"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <ul class="pagination"
                                    style="display: flex; flex-direction: row; justify-content: center">
                                    <li th:if="${currentPage > 0}" th:classappend="${currentPage == 0 ? 'active' : ''}"
                                        class="page-item">
                                        <a th:href="@{/(pageNo=0, keyword=${keyword})}"
                                           class="page-link"><strong>&lt;</strong></a>
                                    </li>

                                    <th:block th:if="${totalPages > 1}">
                                        <li th:each="page : ${#numbers.sequence(1, totalPages)}"
                                            th:classappend="${currentPage == page - 1 ? 'active' : ''}"
                                            class="page-item">
                                            <a th:href="@{/(pageNo=${page - 1}, keyword=${keyword})}" class="page-link">
                                                <strong th:text="${page}"></strong>
                                            </a>
                                        </li>
                                    </th:block>

                                    <li th:if="${currentPage + 1 != totalPages}"
                                        th:classappend="${currentPage == totalPages - 1 ? 'active' : ''}"
                                        class="page-item">
                                        <a th:href="@{/(pageNo=${totalPages - 1}, keyword=${keyword})}"
                                           class="page-link"><strong>&gt;</strong></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="toast-container position-fixed top-0 end-0">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header" style="color: white">
            <strong class="me-auto">TIN NHẮN TỪ HỆ THỐNG</strong>
            <small>Ngay bây giờ</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">

        </div>
    </div>
</div>
<!-- Start Footer Area -->
<footer class="footer">
    <!-- Footer Top -->
    <div class="footer-top section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer about">
                        <div class="logo">
                            <a href="index.html"><img src="/eshop/images/logo2.png" alt="#"></a>
                        </div>
                        <p class="text">Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, magna eros
                            eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis
                            luctus, metus.</p>
                        <p class="call">Got Question? Call us 24/7<span><a href="tel:123456789">+0123 456 789</a></span>
                        </p>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-2 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer links">
                        <h4>Information</h4>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Faq</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Help</a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-2 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer links">
                        <h4>Customer Service</h4>
                        <ul>
                            <li><a href="#">Payment Methods</a></li>
                            <li><a href="#">Money-back</a></li>
                            <li><a href="#">Returns</a></li>
                            <li><a href="#">Shipping</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
                <div class="col-lg-3 col-md-6 col-12">
                    <!-- Single Widget -->
                    <div class="single-footer social">
                        <h4>Get In Tuch</h4>
                        <!-- Single Widget -->
                        <div class="contact">
                            <ul>
                                <li>NO. 342 - London Oxford Street.</li>
                                <li>012 United Kingdom.</li>
                                <li>info@eshop.com</li>
                                <li>+032 3456 7890</li>
                            </ul>
                        </div>
                        <!-- End Single Widget -->
                        <ul>
                            <li><a href="#"><i class="ti-facebook"></i></a></li>
                            <li><a href="#"><i class="ti-twitter"></i></a></li>
                            <li><a href="#"><i class="ti-flickr"></i></a></li>
                            <li><a href="#"><i class="ti-instagram"></i></a></li>
                        </ul>
                    </div>
                    <!-- End Single Widget -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer Top -->
    <div class="copyright">
        <div class="container">
            <div class="inner">
                <div class="row">
                    <div class="col-lg-6 col-12">
                        <div class="left">
                            <p>Copyright © 2020 <a href="http://www.wpthemesgrid.com" target="_blank">Wpthemesgrid</a> -
                                All Rights Reserved.</p>
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
                        <div class="right">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- /End Footer Area -->

<!-- Jquery -->
<script th:src="@{~/eshop/js/jquery.min.js}"></script>
<script th:src="@{~/eshop/js/jquery-migrate-3.0.0.js}"></script>
<script th:src="@{~/eshop/js/jquery-ui.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{~/eshop/js/popper.min.js}"></script>
<!-- Bootstrap JS -->
<script th:src="@{~/eshop/js/bootstrap.min.js}"></script>
<!-- Color JS -->
<!--    <script th:src="@{~/eshop/js/colors.js}"></script>-->
<!-- Slicknav JS -->
<script th:src="@{~/eshop/js/slicknav.min.js}"></script>
<!-- Owl Carousel JS -->
<script th:src="@{~/eshop/js/owl-carousel.js}"></script>
<!-- Magnific Popup JS -->
<script th:src="@{~/eshop/js/magnific-popup.js}"></script>
<!-- Fancybox JS -->
<script th:src="@{~/eshop/js/facnybox.min.js}"></script>
<!-- Waypoints JS -->
<script th:src="@{~/eshop/js/waypoints.min.js}"></script>
<!-- Countdown JS -->
<script th:src="@{~/eshop/js/finalcountdown.min.js}"></script>
<!-- Nice Select JS -->
<script th:src="@{~/eshop/js/nicesellect.js}"></script>
<!-- Ytplayer JS -->
<script th:src="@{~/eshop/js/ytplayer.min.js}"></script>
<!-- Flex Slider JS -->
<script th:src="@{~/eshop/js/flex-slider.js}"></script>
<!-- ScrollUp JS -->
<script th:src="@{~/eshop/js/scrollup.js}"></script>
<!-- Onepage Nav JS -->
<script th:src="@{~/eshop/js/onepage-nav.min.js}"></script>
<!-- Easing JS -->
<script th:src="@{~/eshop/js/easing.js}"></script>
<!-- Active JS -->
<script th:src="@{~/eshop/js/active.js}"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

<div th:replace="~{fragmentsOfUser::script}"></div>

<!-- Messenger Plugin chat Code -->
<div id="fb-root"></div>

<!-- Your Plugin chat code -->
<div id="fb-customer-chat" class="fb-customerchat">
</div>

<script>
    var chatbox = document.getElementById('fb-customer-chat');
    chatbox.setAttribute("page_id", "209997598852833");
    chatbox.setAttribute("attribution", "biz_inbox");
</script>

<!-- Your SDK code -->
<script>
    window.fbAsyncInit = function() {
      FB.init({
        xfbml            : true,
        version          : 'v18.0'
      });
    };

    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = 'https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
</body>
</html>
